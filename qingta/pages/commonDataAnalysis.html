<link rel="stylesheet" href="../source/css/chart.css">
<div class="changeBarContainer">
	<div class="changeBarBox" style="background-color:#fff;">
		<a class="changeLeft green changeButton" style="width: 100%;border-radius: 6px;text-align: center;padding-left:10px;">中南大学数据分析（测试数据）</a>
	</div>
</div>
<div class="changeBarContainer" style="border-top:none;">
	<div class="changeBarBox" style="width:100%;text-align:center;margin-top:0px;">
		<a class="changeLeft green changeButton" style="width:16.6%">科研数据分析</a>
		<a class="changeRight changeButton" style="width:16.6%">人才数据分析</a>
		<a class="changeRight changeButton" style="width:16.6%" href="#/commonDataAnalysisSubject.html?id=11">学科数据分析</a>
		<a class="changeRight changeButton" style="width:16.6%">奖励数据分析</a>
		<a class="changeRight changeButton" style="width:16.6%">经费数据分析</a>
		<a class="changeRight changeButton" style="width:17%">论文数据分析</a>
	</div> 
</div>
<div class="enterBox" style="border-top:2px dashed #eee;">
	<div class="changeBarContainer" style="border-top:none;text-align:center;">
		<div class="chartCommentTitle" style="top:23px;">国家自然科学基金数据分析</div>
		<div class="changeBarBox" style="text-align:center;margin-right:0px;float:none;">
			<a class="changeLeft yellow changeButton">立项数量分析</a>
			<a class="changeRight changeButton">立项金额分析</a>
		</div> 
	</div>
	<div style="width:100%;height:300px;background:#eee;" id="national_science_chart"></div>
</div>

<script>
	var nationalScienceChart = echarts.init(national_science_chart);

	function getFakeData(){
		var fakeData = []
		var max = 0
		for (var i = 2006; i < 2016; i++) {
			var quantity = Math.random() * 400 | 0
			if (quantity > max) {
				max = quantity
			}
			fakeData.push({
				id: i,
				value: quantity
			})
		}
		console.log(fakeData)
		return {max: max, data: fakeData}
	}

	function getOption(data){
			var lineColor = 'rgb(51,204,204)'
			var lineWidth = 3

			return optionQuantity = {
				title: {
					show:false
				},
				grid: {
					containLabel: true,
					left: 0,
					right: 0,
					top: '40px',
					bottom: '20px'
				},
		        legend: {
		            data:['销量']
		        },
		        xAxis:  {
		            type: 'category',
		            axisLabel: {
		            	interval: 0,
		            	textStyle: {
		            		color: '#333'
		            	}
		            },
		            axisTick: {
		            	show: false
		            },
		            axisLine: {
		            	lineStyle: {
		            		color: lineColor,
		            		width: 3
		            	}
		            },
		            data: data.map(function(item){
		            	return item.id + '年'
		            })
		        },
		        yAxis: {
		            type: 'value',
		            interval: 50,
		            axisLine: {
		            	show: false
		            },
		            axisTick: {
		            	show: false
		            },
		            splitLine: {
		            	lineStyle: {
		            		color: '#eee'
		            	}
		            }
		        },
		        series: [
		        	{
			            type:'line',
			            data:data.map(function(item) {return item.value}),
			            symbolSize: 16,
			            label: {
			            	normal: {
			            		show: true,
			            		position: 'top',
			            		textStyle: {
			            			color: '#666'
			            		}
			            	}
			            },
			            itemStyle: {
			            	normal: {
			            		borderColor: lineColor,
			            		borderWidth: lineWidth
			            	}
			            },
			            lineStyle: {
			            	normal: {
			            		color: lineColor,
			            		width: lineWidth
			            	}
			            }
			        }
		        ]
		    }
	}

	nationalScienceChart.setOption(getOption(getFakeData().data))

	$(national_science_chart).siblings('.changeBarContainer').on('click', '.changeButton', function(){
		var $this = $(this)
		$this.siblings().removeClass('yellow')
		$this.addClass('yellow')
		nationalScienceChart.setOption(getOption(getFakeData().data))
	})
</script>