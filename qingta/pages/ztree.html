<!DOCTYPE html>
<HTML>
<HEAD>
	<TITLE> ZTREE DEMO - beforeClick / onClick</TITLE>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<link rel="stylesheet" href="../source/zTree/css/zTreeStyle/zTreeStyle.css" type="text/css">
	<script type="text/javascript" src="../source/js/jquery-1.7.2.js"></script>
	<script type="text/javascript" src="../source/zTree/js/jquery.ztree.all.min.js"></script>
	
</HEAD>

<BODY>
	<ul class="ztree" id="treeDemo"></ul>
	<SCRIPT type="text/javascript">
		var setting = {
			check:{
				chkStyle:"checkbox",
				enable:true,
				chkboxType:{ "Y": "ps", "N": "ps" }
			},
			data:{
				key:{
					children:"kids",
					name:"parents"
				}
			},
			callback:{
				onClick:function(event, treeId, treeNode){
					// console.log(event, treeId, treeNode);
				},
			}
		};
		var zNodes =[
			{ parents:"父节点1 - 展开", open:true,id:1,
				kids: [
					{ parents:"父节点11 - 折叠",
						kids: [
							{ parents:"叶子节点111"},
							{ parents:"叶子节点112"},
							{ parents:"叶子节点113"},
							{ parents:"叶子节点114"}
						]},
					{ parents:"父节点12 - 折叠",
						kids: [
							{ parents:"叶子节点121",},
							{ parents:"叶子节点122"},
							{ parents:"叶子节点123"},
							{ parents:"叶子节点124"}
						]},
					{ parents:"父节点13 - 没有子节点", isParent:true}
				]},
			{ parents:"父节点2 - 折叠",id:2,
				kids: [
					{ parents:"父节点21 - 展开", open:true,
						kids: [
							{ parents:"叶子节点211"},
							{ parents:"叶子节点212"},
							{ parents:"叶子节点213"},
							{ parents:"叶子节点214"}
						]},
					{ parents:"父节点22 - 折叠",
						kids: [
							{ parents:"叶子节点221"},
							{ parents:"叶子节点222"},
							{ parents:"叶子节点223"},
							{ parents:"叶子节点224"}
						]},
					{ parents:"父节点23 - 折叠",
						kids: [
							{ parents:"叶子节点231"},
							{ parents:"叶子节点232"},
							{ parents:"叶子节点233"},
							{ parents:"叶子节点234"}
						]}
				]},
			{ parents:"父节点3 - 没有子节点",id:3, kids: [
							{ parents:"叶子节点231"},
							{ parents:"叶子节点232"},
							{ parents:"叶子节点233"},
							{ parents:"叶子节点234"}
						]
				}

		];

			for (var i=0;i<zNodes.length;i++) {
				zNodes[i].icon="../source/zTree/css/zTreeStyle/img/diy/1_open.png";
				$.fn.zTree.init($("#treeDemo"), setting, zNodes);
			}
			var rootObj=$.fn.zTree.getZTreeObj("treeDemo");
			var rootNodes=$.fn.zTree.getZTreeObj("treeDemo").getNodes();
			var array=rootObj.transformToArray(rootNodes);
			for (var i=0;i<array.length;i++) {
				array[i].icon="../source/zTree/css/zTreeStyle/img/diy/1_open.png";
				// array[i].click="alert('"+array[i].id+"');";
			}
			rootObj.refresh();
			debugger;
			getSelect();
			function getSelect(){
				console.log(rootObj.getCheckedNodes());
			}
	</SCRIPT>
</BODY>
</HTML>